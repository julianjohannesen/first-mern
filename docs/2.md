[back to index](/README.md) | [prev](/docs/1.md) | [next](/docs/3.md)

# Step 2 - Adding Routes to React

Next, we're going to add routes to two pages. Don’t worry if you don’t know much about client-side routing. We’re not going to dwell on it.

First, you need install React Router, a popular routing library for React.

```
 npm i react-router-dom
```

Next, open src/App.js. Select all and delete, leaving the document empty. Copy and paste the following code into the empty document.

```jsx
// App.js

import React from 'react';

// Import the methods that we need from 'react-router-dom'
import {BrowserRouter as Router, Switch, Route, Link} from 'react-router-dom';

function App() {
   return (
	// The Router component needs to wrap all of the other components
    <Router>
        <div className="App">
			{/* The Link component enables a user to navigate to a page without triggering a page refresh.  It also ensures that the browser's back and forward buttons will work. */}
            <Link to="/">Home</Link>
            <Link to="/login">Log In</Link>
			{/* The Switch component will only render the first Route that matches the path the user wants to navigate to. Without it, clicking on the Home link above would render both the Home component and the LogIn component on the same page. */}
            <Switch>
				{/* The Route component matches up routes with components that Route will render. The route can be found in Route's path attribute. There are a few different ways to tell Route what component to render. In this case, the component is a child node. */}
                <Route exact path="/">
                    <Home />
                </Route>
                <Route exact path="/login">
                    <LogIn />
                </Route>
            </Switch>
        </div>
    </Router>
   );
}

export default App;
```

You’ve just added routing to the Home page and the Log In page. When a user visits one of those pages React Router will render the appropriate component, in this case either Home or LogIn. We'll create those components next. 

# Step 2 - Set up the Express server

Now run:

```
 npm i express
```

This will install the Express package. You’ll see some more information printed to ythe screen.

Next, create a new file at the top level (i.e. as a sibling of package.json, README.md, etc.) called server.js.

Open server.js and paste in the following stripped down Express server script:

```js
// server.js

// Use Node's require method to import the Express package
const express = require("express");

// Instantiate an instance of Express
const app = express();

// Create a route that handles a request for the homepage. The first parameter is the route. The second is the route handler. We pass the route handler the HTTP request and response objects and use Express's send() method to send a line of text back to the browser.
app.get("/", function (req, res) {
	res.send("Welcome to the homepage.");
});

// Tell Express to listen to port 8080
app.listen(process.env.PORT || 8080);
```

Next, open package.json and at the top level, the same level as things like “name” and “version,” insert the line:

```js
"proxy": "http://localhost:8080"
```

It's important that you don't accidentally insert that line within an object, e.g. don't accidentally insert it in "dependencies" or "scripts".

You’re almost ready to start the Express server, but first you need to install Nodemon. Nodemon is a package that will update ythe Express server when you make changes to any files. Using Nodemon, you won’t have to manually stop and restart the server every time you make a change.

```
 npm i nodemon
```

Now open package.json again and insert a new script in the scripts object:

```js
"server": "nodemon server.js --inspect --unhandled-rejections=strict"
```

NOTE: Installing Nodemon was necessary to avoid stopping and restarting the Express server every time we make a change, but you should note that this extra step was not necessary for the React server. This feature is built into Create React App applications by default.

You can now start the Express server with:

```
 npm run server
```

Open ythe browser and in the address bar, type in localhost:8080. The page should load, and you should see the “Welcome to the homepage” message. 

This may be a bit confusing. Didn't we just use React to serve a different homepage on port 3000? Yes, we did. So why are we serving two different homepages to two different ports? Great question! For now, it suffices to say that the React front-end is the real front-end. The page we're serving from the Express server simply confirms that the server is working. Later on, the Express server will serve an API with which the React front-end will communicate.


